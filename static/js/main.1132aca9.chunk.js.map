{"version":3,"sources":["components/DropZone.jsx","components/Editor.jsx","App.js","reportWebVitals.js","index.js","components/DropZone.module.scss","components/Editor.module.scss"],"names":["DropZone","onUpload","onDrop","files","accept","minSize","maxSize","maxFiles","getRootProps","getInputProps","className","styles","dropZone","type","dropIcon","Editor","image","useState","canvas","setCanvas","clipPath","setClipPath","cropHelper","setCropHelper","imageElement","setImageElement","useEffect","_canvas","fabric","Canvas","width","height","backgroundColor","_clipPath","Rect","_cropHelper","id","fill","selectable","add","controlsAboveOverlay","on","e","target","scaleY","scaleX","watchForMoving","boundaries","getBoundingRect","set","left","top","_img","Image","lockSkewingY","lockRotation","_imgSize","centerObject","canvasHolder","onDoubleClick","activeObj","getActiveObject","newActive","discardActiveObject","setActiveObject","requestRenderAll","onClick","dataURL","toDataURL","right","format","link","document","createElement","download","href","body","appendChild","click","removeChild","exportBtn","views","App","view","setView","setImage","file","url","URL","createObjectURL","img","src","onload","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.1132aca9.chunk.js","sourcesContent":["import Dropzone from \"react-dropzone\";\n\nimport styles from \"./DropZone.module.scss\";\n\nconst DropZone = ({ onUpload }) => {\n  return (\n    <Dropzone\n      onDrop={(files) => onUpload(files[0])}\n      accept=\"image/*\"\n      minSize={1024}\n      maxSize={3072000}\n      maxFiles={1}\n    >\n      {({ getRootProps, getInputProps }) => {\n        return (\n          <div className={styles.dropZone} {...getRootProps()}>\n            <input type=\"file\" {...getInputProps()} />\n            <div className={styles.dropIcon}>üìÅ</div>\n            <h2>Please drop your image here </h2>\n          </div>\n        );\n      }}\n    </Dropzone>\n  );\n};\n\nexport default DropZone;\n","import { useEffect, useState } from \"react\";\nimport { fabric } from \"fabric\";\n\nimport styles from \"./Editor.module.scss\";\n\nconst CANVAS_WIDTH = 1000;\nconst CANVAS_HEIGHT = 600;\nconst CANVAS_BG = \"white\";\n\nconst Editor = ({ image }) => {\n  const [canvas, setCanvas] = useState(null);\n  const [clipPath, setClipPath] = useState(null);\n  const [cropHelper, setCropHelper] = useState(null);\n  const [imageElement, setImageElement] = useState(null);\n\n  const exportPNG = () => {\n    const boundaries = clipPath.getBoundingRect();\n    const dataURL = canvas.toDataURL({\n      width: boundaries.width,\n      height: boundaries.height,\n      left: boundaries.left,\n      top: boundaries.right,\n      format: \"png\",\n    });\n    const link = document.createElement(\"a\");\n    link.download = \"image.png\";\n    link.href = dataURL;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const handleDblClick = () => {\n    const activeObj = canvas.getActiveObject();\n    if (!activeObj) return;\n\n    const newActive =\n      activeObj.id === \"crop-helper\" ? imageElement : cropHelper;\n    canvas.discardActiveObject();\n    canvas.setActiveObject(newActive);\n\n    canvas.requestRenderAll();\n  };\n\n  // effects\n  useEffect(() => {\n    const _canvas = new fabric.Canvas(\"canvas\", {\n      width: CANVAS_WIDTH,\n      height: CANVAS_HEIGHT,\n      backgroundColor: CANVAS_BG,\n    });\n\n    const _clipPath = new fabric.Rect();\n    const _cropHelper = new fabric.Rect({\n      id: \"crop-helper\",\n      fill: \"rgba(0,0,0,0)\",\n      selectable: false,\n    });\n\n    _canvas.add(_cropHelper);\n    setCanvas(_canvas);\n    setClipPath(_clipPath);\n    setCropHelper(_cropHelper);\n\n    _canvas.clipPath = _clipPath;\n    _canvas.controlsAboveOverlay = true;\n\n    // scale element preserving aspect ratio\n    _canvas.on(\"object:scaling\", (e) => {\n      if (e.target.id === \"img\") {\n        e.target.scaleY = e.target.scaleX;\n      }\n    });\n\n    const watchForMoving = (e) => {\n      const boundaries = e.target.getBoundingRect();\n\n      if (e.target.id === \"crop-helper\") {\n        _clipPath.set({\n          width: boundaries.width,\n          height: boundaries.height,\n          left: boundaries.left,\n          top: boundaries.top,\n        });\n      }\n    };\n\n    _canvas.on(\"object:moving\", watchForMoving);\n    _canvas.on(\"object:scaling\", watchForMoving);\n  }, []);\n\n  useEffect(() => {\n    if (image === null || canvas === null) return;\n\n    const _img = new fabric.Image(image, {\n      id: \"img\",\n      lockSkewingY: true,\n      lockRotation: true,\n    });\n    const _imgSize = { width: _img.width, height: _img.height };\n\n    clipPath.set(_imgSize);\n    cropHelper.set(_imgSize);\n\n    canvas.add(_img);\n    canvas.centerObject(_img);\n    canvas.centerObject(clipPath);\n    canvas.centerObject(cropHelper);\n    setImageElement(_img);\n  }, [image, canvas, clipPath, cropHelper]);\n\n  return (\n    <>\n      <div className={styles.canvasHolder} onDoubleClick={handleDblClick}>\n        <canvas id=\"canvas\"></canvas>\n      </div>\n      <button onClick={exportPNG} className={styles.exportBtn}>\n        export as png\n      </button>\n    </>\n  );\n};\n\nexport default Editor;\n","import { useState } from \"react\";\nimport DropZone from \"./components/DropZone\";\nimport Editor from \"./components/Editor\";\n\nimport \"./App.css\";\n\nconst views = {\n  editor: \"editor\",\n  upload: \"upload\",\n};\n\nfunction App() {\n  const [view, setView] = useState(views.upload);\n  const [image, setImage] = useState(null);\n\n  // receive file\n  // create image element\n  // open editor tab\n  const handleUpload = (file) => {\n    const url = URL.createObjectURL(file);\n    const img = new Image();\n    img.src = url;\n    img.onload = () => setImage(img);\n    setView(\"editor\");\n  };\n\n  return (\n    <div className=\"App\">\n      {view === views.upload ? (\n        <DropZone onUpload={handleUpload} />\n      ) : (\n        <Editor image={image} />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropZone\":\"DropZone_dropZone__Nhuy6\",\"dropIcon\":\"DropZone_dropIcon__2MXoI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvasHolder\":\"Editor_canvasHolder__1EAVo\",\"exportBtn\":\"Editor_exportBtn__htYV0\"};"],"sourceRoot":""}